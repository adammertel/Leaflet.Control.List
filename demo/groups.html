<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-16">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" />
    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
    <link rel="stylesheet" href="../dist/leaflet.control.select.css" />

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
    <script src="../dist/leaflet.control.select.src.js"></script>
</head>

<style>
    #map {
        width: 100%;
        height: 100%;
        margin: 0
    }

    .marker-icon.fa {
        font-size: 40px
    }
</style>

<body>
    <div id="map"></div>
</body>

<script>
    var map;
    var marker;
    var mapZoom = 11;
    var mapPosition = [49, 18];

    var items = [
        {
            label: 'group 1 longer name', value: 'g1', items: [
                { label: 'option 1', value: 'g11' },
                { label: 'option 2', value: 'g12' },
                { label: 'option 3', value: 'g13' },
                {
                    label: 'group 3 even a bit longer name', value: 'g3', items: [
                        { label: 'option 1', value: 'g31' },
                        { label: 'option 2', value: 'g32' },
                        { label: 'option 3', value: 'g33' },
                    ]
                },
            ]
        },
        { label: 'option 5', value: 'car' },
        {
            label: 'group 2', value: 'g2', items: [
                { label: 'option 6', value: 'g21' },
                { label: 'option 7', value: 'g22' }
            ]
        }
    ]

    document.addEventListener('DOMContentLoaded', function () {
        map = L.map('map', { maxZoom: 14 }).setView(mapPosition, mapZoom);
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(map)

        var defaultValue = items[0].value;

        L.control.select({
            position: 'topleft',
            id: 'image-selector',
            selectedDefault: defaultValue,
            items: items,
            icons: {
                checked: 'fa-home'
            },
            onSelect: function (newIcon) {
                // console.log('on select')
                drawMarker(newIcon)
            },
            onGroupOpen: function (groupOpened) {
                // console.log(groupOpened)
            }
        }).addTo(map);

        marker = L.marker([49, 18]).addTo(map)

        drawMarker(defaultValue)
    })
    var drawMarker = function (icon) {
        marker.setIcon(L.divIcon({ className: 'marker-icon fa fa-' + icon, iconSize: [40, 40] }))
    }
</script>

</html>